{
  "engines": {
    "vscode": "^1.64.0"
  },
  "activationEvents": [
    "onLanguage:cobol",
    "workspaceContains:**/*.[cC]{ob,OB,bl,BL,py,PY,bx,BX}",
    "workspaceContains:{_superbol,superbol.toml}"
  ],
  "contributes": {
    "breakpoints": [
      {
        "language": "cobol"
      }
    ],
    "commands": [
      {
        "command": "superbol.server.restart",
        "title": "Restart Language Server",
        "category": "SuperBOL"
      }
    ],
    "configuration": {
      "title": "SuperBOL COBOL",
      "properties": {
        "superbol.cobol.copybooks": {
          "title": "Copybook paths",
          "type": "array",
          "description": "List of copybooks paths"
        },
        "superbol.cobol.dialect": {
          "type": "string",
          "default": "default",
          "description": "Default COBOL dialect; \"default\" is equivalent to \"gnucobol\"",
          "items": "string",
          "enum": [
            "default",
            "gnucobol",
            "cobol85",
            "cobol2002",
            "cobol2014",
            "acu",
            "acu-strict",
            "bs2000",
            "bs2000-strict",
            "gcos",
            "gcos-strict",
            "ibm",
            "ibm-strict",
            "mf",
            "mf-strict",
            "mvs",
            "mvs-strict",
            "realia",
            "realia-strict",
            "rm",
            "rm-strict",
            "xopen"
          ]
        },
        "superbol.cobol.source-format": {
          "type": "string",
          "default": "auto",
          "description": "Default source reference-format",
          "items": "string",
          "enum": [
            "auto",
            "fixed",
            "free",
            "cobol85",
            "variable",
            "xopen",
            "xcard",
            "crt",
            "terminal",
            "cobolx"
          ]
        },
        "superbol.lsp-path": {
          "title": "SuperBOL executable",
          "type": "string",
          "default": "",
          "description": "Name of the `superbol-free` executable if available in PATH; may be an absolute path otherwise. Leave empty to use the bundled `superbol-free`, if available.",
          "scope": "machine"
        },
        "superbol.cobc-path": {
          "title": "GnuCOBOL compiler executable",
          "type": "string",
          "default": "cobc",
          "description": "Path to the GnuCOBOL compiler executable.",
          "scope": "machine-overridable"
        },
        "superbol.debugger.display-variable-attributes": {
          "type": "boolean",
          "default": false,
          "description": "Display storage property and field attributes (e.g. size of alphanumerics, digits and scale of numerics).",
          "scope": "resource"
        },
        "superbol.debugger.gdb-path": {
          "title": "GNU debugger executable",
          "type": "string",
          "default": "gdb",
          "description": "Path to the GNU debugger executable.",
          "scope": "machine-overridable"
        },
        "superbol.debugger.libcob-path": {
          "title": "GnuCOBOL runtime library",
          "type": "string",
          "default": "cobc",
          "description": "Path to the GnuCOBOL runtime library file.",
          "scope": "machine-overridable"
        }
      }
    },
    "debuggers": [
      {
        "type": "gdb",
        "label": "SuperBOL Debugger for GnuCOBOL",
        "program": "./_dist/superbol-vscode-gdb.js",
        "runtime": "node",
        "languages": [
          "cobol",
          "COBOL"
        ],
        "configurationAttributes": {
          "launch": {
            "required": [],
            "properties": {
              "target": {
                "type": "string",
                "description": "Path to debugged executable",
                "default": "${file}"
              },
              "arguments": {
                "type": "string",
                "description": "Extra arguments for executable",
                "default": null
              },
              "cwd": {
                "type": "string",
                "description": "Path to project",
                "default": "${workspaceFolder}"
              },
              "gdb-path": {
                "type": "string",
                "description": "Path to gdb",
                "default": "gdb"
              },
              "libcob-path": {
                "type": "string",
                "description": "Path to libcob",
                "default": null
              },
              "group": {
                "type": "array",
                "description": "Compilation groups of executable",
                "default": []
              },
              "env": {
                "type": "object",
                "description": "Environment variables",
                "default": null
              },
              "coverage": {
                "type": "boolean",
                "description": "Enable code coverage",
                "default": true
              },
              "verbose": {
                "type": "boolean",
                "description": "Debug GDB",
                "default": false
              }
            }
          },
          "attach": {
            "required": [],
            "properties": {
              "target": {
                "type": "string",
                "description": "Path to executable",
                "default": "${file}"
              },
              "arguments": {
                "type": "string",
                "description": "Extra arguments for executable",
                "default": null
              },
              "cwd": {
                "type": "string",
                "description": "Path to project",
                "default": "${workspaceFolder}"
              },
              "gdb-path": {
                "type": "string",
                "description": "Path to gdb",
                "default": "gdb"
              },
              "libcob-path": {
                "type": "string",
                "description": "Path to libcob",
                "default": null
              },
              "group": {
                "type": "array",
                "description": "Compilation groups of executable",
                "default": []
              },
              "env": {
                "type": "object",
                "description": "Environment variables",
                "default": null
              },
              "verbose": {
                "type": "boolean",
                "description": "Debug GDB",
                "default": false
              },
              "pid": {
                "type": "string",
                "description": "PID of the executable",
                "default": null
              },
              "remote-debugger": {
                "type": "string",
                "description": "GDB Server host:port",
                "default": null
              }
            }
          }
        },
        "configurationSnippets": [
          {
            "label": "SuperBOL: debug (launch)",
            "description": "New SuperBOL launch request",
            "body": {
              "name": "${2:SuperBOL: debug (launch)}",
              "type": "gdb",
              "request": "launch",
              "preLaunchTask": "SuperBOL: build (debug)",
              "target": "$${_:{file}}",
              "arguments": "",
              "cwd": "$${_:{workspaceFolder}}",
              "group": [],
              "coverage": true,
              "verbose": false
            }
          },
          {
            "label": "SuperBOL: debug (attach local)",
            "description": "Attach to a local debug session",
            "body": {
              "name": "${2:SuperBOL: debug (attach local)}",
              "type": "gdb",
              "request": "attach",
              "pid": "${3:0}",
              "target": "$${_:{file}}",
              "arguments": "",
              "cwd": "$${_:{workspaceFolder}}",
              "group": [],
              "verbose": false
            }
          },
          {
            "label": "SuperBOL: debug (attach remote)",
            "description": "Attach to a remote debug session",
            "body": {
              "name": "${2:SuperBOL: debug (attach remote)}",
              "type": "gdb",
              "request": "attach",
              "remote-debugger": "${3:host:port}",
              "target": "$${_:{file}}",
              "arguments": "",
              "cwd": "$${_:{workspaceFolder}}",
              "group": [],
              "verbose": false
            }
          }
        ]
      }
    ],
    "languages": [
      {
        "id": "cobol",
        "aliases": [
          "COBOL"
        ],
        "filenamePatterns": [
          "*.[cC]{ob,OB,bl,BL,py,PY,bx,BX}"
        ]
      }
    ],
    "problemMatchers": [
      {
        "name": "gnucobol",
        "owner": "cobol",
        "fileLocation": "autodetect",
        "pattern": "$gnucobol",
        "source": "GnuCOBOL"
      },
      {
        "name": "gnucobol-warning",
        "owner": "cobol",
        "fileLocation": "autodetect",
        "pattern": "$gnucobol-warning",
        "source": "GnuCOBOL",
        "severity": "warning"
      },
      {
        "name": "gnucobol-error",
        "owner": "cobol",
        "fileLocation": "autodetect",
        "pattern": "$gnucobol-error",
        "source": "GnuCOBOL",
        "severity": "error"
      },
      {
        "name": "gnucobol-note",
        "owner": "cobol",
        "fileLocation": "autodetect",
        "pattern": "$gnucobol-note",
        "source": "GnuCOBOL",
        "severity": "info"
      }
    ],
    "problemPatterns": [
      {
        "name": "gnucobol",
        "regexp": "^(.*): ?(\\d+): (error|warning): ([^[]*)(\\[(.*)\\])?$",
        "file": 1,
        "line": 2,
        "severity": 3,
        "code": 6,
        "message": 4
      },
      {
        "name": "gnucobol-warning",
        "regexp": "^(.*):(\\d+):\\s?(warning|Warnung|[wW]aarschuwing|[aA]lerta|avertissement|упозорење)\\s?:([^[]*)(\\[(.*)\\])?$",
        "file": 1,
        "line": 2,
        "code": 6,
        "message": 4
      },
      {
        "name": "gnucobol-error",
        "regexp": "^(.*): ?(\\d+):\\s?(error|Fehler|[fF]out|[eE]rrores|[eE]rrores|erreur|грешка)\\s?:\\s?([^[]*)(\\[(.*)\\])?$",
        "file": 1,
        "line": 2,
        "code": 6,
        "message": 4
      },
      {
        "name": "gnucobol-note",
        "regexp": "^(.*): ?(\\d+): (note|Anmerkung|[nN]ota): ([^[]*)(\\[(.*)\\])?$",
        "file": 1,
        "line": 2,
        "code": 6,
        "message": 4
      }
    ],
    "taskDefinitions": [
      {
        "type": "superbol",
        "properties": {
          "for-debug": {
            "type": "boolean",
            "description": "Build for debugging"
          },
          "cobc-path": {
            "title": "GnuCOBOL compiler executable",
            "type": [
              "string",
              "null"
            ],
            "description": "Path to the GnuCOBOL compiler executable; when `null`, defaults to the value of \"superbol.cobc-path\" from the workspace configuration, if defined, to \"cobc\" otherwise."
          },
          "extra-args": {
            "type": "array",
            "description": "Additional arguments passed to `cobc`"
          }
        }
      }
    ]
  },
  "name": "SuperBOL",
  "displayName": "SuperBOL Studio OSS",
  "description": "Provides a COBOL mode in VSCode, based on the SuperBOL LSP server for COBOL",
  "license": "MIT",
  "version": "0.1.0",
  "repository": {
    "type": "git",
    "url": "https://github.com/OCamlPro/superbol-studio-oss"
  },
  "homepage": "https://get-superbol.com",
  "author": {
    "name": "SuperBOL at OCamlPro",
    "email": "contact@ocamlpro.com"
  },
  "keywords": [
    "cobol",
    "gnucobol"
  ],
  "main": "./_dist/superbol-vscode-platform-bundle",
  "scripts": {
    "compile": "make compile",
    "package": "make vsix-package",
    "deploy:vsce": "make deploy-vsce",
    "deploy:ovsx": "make deploy-ovsx"
  },
  "dependencies": {
    "@vscode/debugadapter": "^1.61.0",
    "@vscode/debugprotocol": "^1.61.0",
    "vscode-languageclient": "8.0.2",
    "polka": "^1.0.0-next.22",
    "sirv": "^2.0.2",
    "n-readlines": "^1.0.0"
  },
  "devDependencies": {
    "@types/vscode": "^1.64.0",
    "esbuild": "^0.15.16",
    "fs-extra": "^10.0.1",
    "mocha": "^9.2.2",
    "npm-run-all": "^4.1.5",
    "ovsx": "^0.1.0",
    "prettier": "^2.5.1",
    "@vscode/vsce": "^2.15.0",
    "@vscode/test-electron": "^1.6.1",
    "typescript": "^5.1.6",
    "@types/node": "^20.3.2"
  },
  "publisher": "OCamlPro",
  "categories": [
    "Formatters",
    "Programming Languages",
    "Linters",
    "Snippets",
    "Debuggers",
    "Other"
  ],
  "icon": "images/superbol-128.png"
}
