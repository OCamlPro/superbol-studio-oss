<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>SuperBOL mode for GNU/Emacs &mdash; superbol master
 (3bf2ffb
) (2024/02/08 13:56) documentation</title>
      <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
      <link rel="stylesheet" href="_static/css/fixes.css" type="text/css" />
  
        <script data-url_root="./" id="documentation_options" src="_static/documentation_options.js"></script>
        <script src="_static/jquery.js"></script>
        <script src="_static/underscore.js"></script>
        <script src="_static/doctools.js"></script>
    <script src="_static/js/theme.js"></script>
    <link rel="author" title="About these documents" href="about.html" />
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Sub-commands and Arguments" href="commands.html" />
    <link rel="prev" title="SuperBOL VSCode Debug" href="debug.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
            <a href="index.html" class="icon icon-home"> superbol
          </a>
              <div class="version">
                master
 (3bf2ffb
)
              </div>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Documentation</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference external" href="https://ocamlpro.github.io/superbol-studio-oss/sphinx">Home</a></li>
<li class="toctree-l1"><a class="reference internal" href="about.html">About SuperBOL</a></li>
<li class="toctree-l1"><a class="reference internal" href="installing-superbol-vsix.html">Installing the SuperBOL VSCode extension</a></li>
<li class="toctree-l1"><a class="reference internal" href="building-superbol.html">Building SuperBOL from Sources</a></li>
<li class="toctree-l1"><a class="reference internal" href="lsp.html">SuperBOL LSP Server</a></li>
<li class="toctree-l1"><a class="reference internal" href="vscode-extension.html">SuperBOL VSCode Extension</a></li>
<li class="toctree-l1"><a class="reference internal" href="debug.html">SuperBOL VSCode Debug</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">SuperBOL mode for GNU/Emacs</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#standard-file-cobol-superbol-mode-el">Standard file <code class="code docutils literal notranslate"><span class="pre">cobol-superbol-mode.el</span></code></a><ul>
<li class="toctree-l3"><a class="reference internal" href="#installation">Installation</a></li>
<li class="toctree-l3"><a class="reference internal" href="#features">Features</a></li>
<li class="toctree-l3"><a class="reference internal" href="#customization">Customization</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#superbol-mode-with-lsp">Superbol-mode with LSP</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#superbol-mode-with-lsp-mode">Superbol-mode with <cite>lsp-mode</cite></a></li>
<li class="toctree-l3"><a class="reference internal" href="#superbol-mode-with-eglot">Superbol-mode with <cite>eglot</cite></a></li>
<li class="toctree-l3"><a class="reference internal" href="#setup">Setup</a></li>
<li class="toctree-l3"><a class="reference internal" href="#further-configuration-for-auto-indentation">Further configuration for auto-indentation:</a></li>
<li class="toctree-l3"><a class="reference internal" href="#known-issues">Known Issues</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="commands.html">Sub-commands and Arguments</a></li>
<li class="toctree-l1"><a class="reference external" href="https://ocamlpro.github.io/superbol-studio-oss/doc">API doc</a></li>
<li class="toctree-l1"><a class="reference internal" href="license.html">Copyright and License</a></li>
<li class="toctree-l1"><a class="reference external" href="https://github.com/ocamlpro/superbol-studio-oss">Sources and Issues on Github</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">superbol</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="index.html" class="icon icon-home"></a> &raquo;</li>
      <li>SuperBOL mode for GNU/Emacs</li>
      <li class="wy-breadcrumbs-aside">
            <a href="_sources/emacs.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="superbol-mode-for-gnu-emacs">
<h1>SuperBOL mode for GNU/Emacs<a class="headerlink" href="#superbol-mode-for-gnu-emacs" title="Permalink to this headline"></a></h1>
<p>We provide an extension of the <code class="code docutils literal notranslate"><span class="pre">cobol-mode.el</span></code> of ELPA under the
name <code class="code docutils literal notranslate"><span class="pre">cobol-superbol-mode.el</span></code> that provides some fixes and run
with our LSP server for COBOL.</p>
<section id="standard-file-cobol-superbol-mode-el">
<h2>Standard file <code class="code docutils literal notranslate"><span class="pre">cobol-superbol-mode.el</span></code><a class="headerlink" href="#standard-file-cobol-superbol-mode-el" title="Permalink to this headline"></a></h2>
<p>We provide <code class="code docutils literal notranslate"><span class="pre">cobol-superbol-mode.el</span></code> as a fork of
<code class="code docutils literal notranslate"><span class="pre">cobol-mode.el</span></code> from ELPA, with a few fixes:</p>
<ul class="simple">
<li><p>Better indentation</p></li>
<li><p>Minor modes to switch between formats</p></li>
<li><p>Documentation accessible from the COBOL menu</p></li>
</ul>
<section id="installation">
<h3>Installation<a class="headerlink" href="#installation" title="Permalink to this headline"></a></h3>
<p>If you are already using the Cobol mode by ELPA, you need to
desinstall it. For that, use <cite>M-x list-packages</cite>, go to <cite>cobol-mode</cite>,
type <cite>D</cite> to select it for deletion, and then <cite>x</cite> to execute the
removal.</p>
<p>Copy the file <code class="code docutils literal notranslate"><span class="pre">cobol-superbol-mode.el</span></code> to your
<code class="code docutils literal notranslate"><span class="pre">$HOME/.emacs.d/lisp/</span></code> directory:</p>
<div class="highlight-ocaml notranslate"><div class="highlight"><pre><span></span><span class="n">wget</span> <span class="n">https</span><span class="o">://</span><span class="n">github</span><span class="o">.</span><span class="n">com</span><span class="o">/</span><span class="nc">OCamlPro</span><span class="o">/</span><span class="n">superbol</span><span class="o">-</span><span class="n">studio</span><span class="o">-</span><span class="n">oss</span><span class="o">/</span><span class="n">raw</span><span class="o">/</span><span class="n">master</span><span class="o">/</span><span class="n">emacs</span><span class="o">/</span><span class="n">cobol</span><span class="o">-</span><span class="n">superbol</span><span class="o">-</span><span class="n">mode</span><span class="o">.</span><span class="n">el</span>
<span class="n">mkdir</span> <span class="o">-</span><span class="n">p</span> <span class="o">$</span><span class="nc">HOME</span><span class="o">/.</span><span class="n">emacs</span><span class="o">.</span><span class="n">d</span><span class="o">/</span><span class="n">lisp</span><span class="o">/</span>
<span class="n">mv</span> <span class="n">cobol</span><span class="o">-</span><span class="n">superbol</span><span class="o">-</span><span class="n">mode</span><span class="o">.</span><span class="n">el</span>  <span class="o">$</span><span class="nc">HOME</span><span class="o">/.</span><span class="n">emacs</span><span class="o">.</span><span class="n">d</span><span class="o">/</span><span class="n">lisp</span><span class="o">/</span>
</pre></div>
</div>
<p>and add the following lines to your <code class="code docutils literal notranslate"><span class="pre">$HOME/.emacs</span></code> file:</p>
<div class="highlight-ocaml notranslate"><div class="highlight"><pre><span></span><span class="o">(</span><span class="n">add</span><span class="o">-</span><span class="k">to</span><span class="o">-</span><span class="kt">list</span> <span class="k">&#39;</span><span class="n">load</span><span class="o">-</span><span class="n">path</span> <span class="s2">&quot;~/.emacs.d/lisp/&quot;</span><span class="o">)</span>
<span class="o">(</span><span class="n">autoload</span> <span class="k">&#39;</span><span class="n">cobol</span><span class="o">-</span><span class="n">superbol</span><span class="o">-</span><span class="n">mode</span> <span class="s2">&quot;cobol-superbol-mode&quot;</span><span class="o">)</span>
<span class="o">(</span><span class="n">setq</span> <span class="n">cobol</span><span class="o">-</span><span class="n">tab</span><span class="o">-</span><span class="n">width</span> <span class="mi">3</span><span class="o">)</span>
<span class="o">(</span><span class="n">setq</span> <span class="n">auto</span><span class="o">-</span><span class="n">mode</span><span class="o">-</span><span class="n">alist</span>
  <span class="o">(</span><span class="n">append</span>
   <span class="k">&#39;</span><span class="o">((</span><span class="s2">&quot;</span><span class="se">\\</span><span class="s2">.cob</span><span class="se">\\</span><span class="s2">&#39;&quot;</span> <span class="o">.</span> <span class="n">cobol</span><span class="o">-</span><span class="n">superbol</span><span class="o">-</span><span class="n">mode</span><span class="o">)</span>
     <span class="o">(</span><span class="s2">&quot;</span><span class="se">\\</span><span class="s2">.cbl</span><span class="se">\\</span><span class="s2">&#39;&quot;</span> <span class="o">.</span> <span class="n">cobol</span><span class="o">-</span><span class="n">superbol</span><span class="o">-</span><span class="n">mode</span><span class="o">)</span>
     <span class="o">(</span><span class="s2">&quot;</span><span class="se">\\</span><span class="s2">.cpy</span><span class="se">\\</span><span class="s2">&#39;&quot;</span> <span class="o">.</span> <span class="n">cobol</span><span class="o">-</span><span class="n">superbol</span><span class="o">-</span><span class="n">mode</span><span class="o">))</span>
   <span class="n">auto</span><span class="o">-</span><span class="n">mode</span><span class="o">-</span><span class="n">alist</span><span class="o">))</span>
</pre></div>
</div>
<p>Start a new Emacs process and open a COBOL file: verify that the
<cite>COBOL</cite> menu is available and contains a <cite>SuperBOL by OCamlPro</cite>
entry. You are done!</p>
<p>This configuration will set tabulations to be 3 spaces and free source
format. If you want to change the source format, you will need to
change this option using <code class="code docutils literal notranslate"><span class="pre">M-x</span> <span class="pre">customize</span></code>, save and then restart emacs.</p>
</section>
<section id="features">
<h3>Features<a class="headerlink" href="#features" title="Permalink to this headline"></a></h3>
<p>The <code class="code docutils literal notranslate"><span class="pre">cobol-superbol-mode.el</span></code> provides the following features:</p>
<ul class="simple">
<li><p>colorization</p></li>
<li><p>indentation</p></li>
<li><p>comments</p></li>
<li><p>rulers</p></li>
<li><p>minor-modes for source formats</p></li>
<li><p>a COBOL menu with:</p>
<ul>
<li><p>an “Insert” item with a few constructions</p></li>
<li><p>a sub-menu with links to GnuCOBOL documentation</p></li>
<li><p>a sub-menu to switch between source formats</p></li>
</ul>
</li>
</ul>
</section>
<section id="customization">
<h3>Customization<a class="headerlink" href="#customization" title="Permalink to this headline"></a></h3>
<ul class="simple">
<li><p>cobol-skeleton-alist (check the <cite>cobol–def-skeleton</cite> function)</p></li>
</ul>
<p>We advise to also use the <code class="code docutils literal notranslate"><span class="pre">auto-complete</span></code> mode also. This mode
will propose completions while typing keywords (use TAB or RET to
complete).</p>
</section>
</section>
<section id="superbol-mode-with-lsp">
<h2>Superbol-mode with LSP<a class="headerlink" href="#superbol-mode-with-lsp" title="Permalink to this headline"></a></h2>
<p>The new Superbol-mode provides an IDE that makes use of the SuperBOL
LSP to provide advanced navigation and editing facilities for COBOL
projects.  It can be used in combination with any of the two main LSP
clients that exist within the GNU/Emacs ecosystem to interact with LSP
servers: <cite>lsp-mode</cite> and <cite>eglot</cite>.</p>
<section id="superbol-mode-with-lsp-mode">
<h3>Superbol-mode with <cite>lsp-mode</cite><a class="headerlink" href="#superbol-mode-with-lsp-mode" title="Permalink to this headline"></a></h3>
<p><a class="reference external" href="https://github.com/emacs-lsp/lsp-mode">lsp-mode</a> appears to be the most prominent at the moment.  This
client benefits from a large user-base, but is also considered
“bloated” by some.</p>
<p>The main advantages for using it in our context is its support for
<a class="reference external" href="https://code.visualstudio.com/api/language-extensions/semantic-highlight-guide">semantic tokens</a>, that provide a way for LSPs to issue information
about the semantics of symbols from the source code.  Compared to
traditional regexp-based highlighting, semantic tokens-based
highlighting can drastically improve code readability of various
source code elements based on their syntactic location;</p>
</section>
<section id="superbol-mode-with-eglot">
<h3>Superbol-mode with <cite>eglot</cite><a class="headerlink" href="#superbol-mode-with-eglot" title="Permalink to this headline"></a></h3>
<p>Another possibility is to use <a class="reference external" href="https://elpa.gnu.org/packages/eglot.html">eglot</a>, that is sometimes considered
easier to configure and more lightweight than <cite>lsp-mode</cite> (which
notably makes it more reactive to user inputs).  Being more recent, it
lacks some of the features of <cite>lsp-mode</cite>, among which is the support
for semantic tokens <a class="footnote-reference brackets" href="#eglot-semtok-issue" id="id1">1</a>.  However, additionally
enabling the aforementioned <cite>cobol-mode.el</cite> provides reasonable syntax
highlighting.</p>
</section>
<section id="setup">
<h3>Setup<a class="headerlink" href="#setup" title="Permalink to this headline"></a></h3>
<p>Let us first define an environment variable that indicates where the
<code class="docutils literal notranslate"><span class="pre">superbol-free</span></code> executable can be found.  Additionally, define a
variable that points to the root of the source directory for the
extension:</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span><span class="nb">export</span> <span class="nv">SUPERBOL_DIR</span><span class="o">=</span><span class="s2">&quot;&lt;directory where superbol-free can be found&gt;&quot;</span><span class="p">;</span>
<span class="nb">export</span> <span class="nv">SUPERBOL_STUDIO_OSS_DIR</span><span class="o">=</span><span class="s2">&quot;</span><span class="nv">$PWD</span><span class="s2">&quot;</span><span class="p">;</span>
</pre></div>
</div>
<p>After this, the following command launches a GNU/Emacs instance with
an <cite>lsp-mode</cite>-based client configured for COBOL files:</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>emacs -L <span class="s2">&quot;</span><span class="nv">$SUPERBOL_STUDIO_OSS_DIR</span><span class="s2">/emacs&quot;</span> <span class="se">\</span>
      --load lsp-superbol <span class="se">\</span>
      --eval <span class="s2">&quot;(custom-set-variables &#39;(lsp-superbol-path \&quot;</span><span class="nv">$SUPERBOL_DIR</span><span class="s2">\&quot;))&quot;</span> <span class="se">\</span>
      --funcall superbol-mode-enable-for-default-extensions
</pre></div>
</div>
<p>To use <cite>eglot</cite>, type the following instead:</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>emacs -L <span class="s2">&quot;</span><span class="nv">$SUPERBOL_STUDIO_OSS_DIR</span><span class="s2">/emacs&quot;</span> <span class="se">\</span>
      --load eglot-superbol <span class="se">\</span>
      --eval <span class="s2">&quot;(add-to-list &#39;exec-path \&quot;</span><span class="nv">$SUPERBOL_DIR</span><span class="s2">\&quot;)&quot;</span> <span class="se">\</span>
      --funcall superbol-mode-enable-for-default-extensions
</pre></div>
</div>
</section>
<section id="further-configuration-for-auto-indentation">
<h3>Further configuration for auto-indentation:<a class="headerlink" href="#further-configuration-for-auto-indentation" title="Permalink to this headline"></a></h3>
<p><cite>lsp-mode</cite> provides a <code class="docutils literal notranslate"><span class="pre">lsp-format-region</span></code> function that may be used
to use the LSP-provided intentation.  When using <cite>eglot</cite>, the same
functionality is provided by <code class="docutils literal notranslate"><span class="pre">eglot-format</span></code>.</p>
<dl class="footnote brackets">
<dt class="label" id="eglot-semtok-issue"><span class="brackets"><a class="fn-backref" href="#id1">1</a></span></dt>
<dd><p>Note there is a pending issue on this point
at <a class="reference external" href="https://github.com/joaotavora/eglot/issues/615">https://github.com/joaotavora/eglot/issues/615</a> .</p>
</dd>
</dl>
</section>
<section id="known-issues">
<h3>Known Issues<a class="headerlink" href="#known-issues" title="Permalink to this headline"></a></h3>
<ul class="simple">
<li><p><cite>void-function -compose</cite>: install the <cite>dash</cite> package on ELPA</p></li>
<li><p>Install <cite>yasnippet</cite> ?</p></li>
</ul>
</section>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="debug.html" class="btn btn-neutral float-left" title="SuperBOL VSCode Debug" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="commands.html" class="btn btn-neutral float-right" title="Sub-commands and Arguments" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright OCamlPro SAS.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>