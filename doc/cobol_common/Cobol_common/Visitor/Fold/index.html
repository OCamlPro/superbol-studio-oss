<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>Fold (cobol_common.Cobol_common.Visitor.Fold)</title><meta charset="utf-8"/><link rel="stylesheet" href="../../../../odoc.support/odoc.css"/><meta name="generator" content="odoc 2.4.2"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><script src="../../../../odoc.support/highlight.pack.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body class="odoc"><nav class="odoc-nav"><a href="../index.html">Up</a> â€“ <a href="../../../index.html">cobol_common</a> &#x00BB; <a href="../../index.html">Cobol_common</a> &#x00BB; <a href="../index.html">Visitor</a> &#x00BB; Fold</nav><header class="odoc-preamble"><h1>Module <code><span>Visitor.Fold</span></code></h1><p>Visitor that accumulates over the nodes of the tree.</p></header><div class="odoc-content"><div class="odoc-spec"><div class="spec type anchored" id="type-action"><a href="#type-action" class="anchor"></a><code><span><span class="keyword">type</span> <span>'a action</span></span><span> = <span><span class="type-var">'a</span> <a href="../index.html#type-folding_action">folding_action</a></span></span></code></div></div><div class="odoc-spec"><div class="spec type anchored" id="type-fold"><a href="#type-fold" class="anchor"></a><code><span><span class="keyword">type</span> <span>('x, 'a) fold</span></span><span> = <span><span class="type-var">'x</span> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'a</span> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'a</span> <a href="../index.html#type-folding_action">folding_action</a></span></span></code></div></div><p>Some combinators to write more readable folding visitors</p><div class="odoc-spec"><div class="spec value anchored" id="val-skip_children"><a href="#val-skip_children" class="anchor"></a><code><span><span class="keyword">val</span> skip_children : <span><span class="type-var">'a</span> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'b</span> <a href="../index.html#type-folding_action">folding_action</a></span></span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-skip"><a href="#val-skip" class="anchor"></a><code><span><span class="keyword">val</span> skip : <span><span class="type-var">'a</span> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'a</span> <a href="../index.html#type-folding_action">folding_action</a></span></span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-do_children"><a href="#val-do_children" class="anchor"></a><code><span><span class="keyword">val</span> do_children : <span><span class="type-var">'a</span> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'b</span> <a href="../index.html#type-folding_action">folding_action</a></span></span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-proceed"><a href="#val-proceed" class="anchor"></a><code><span><span class="keyword">val</span> proceed : <span><span class="type-var">'a</span> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'a</span> <a href="../index.html#type-folding_action">folding_action</a></span></span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-do_children_and_then"><a href="#val-do_children_and_then" class="anchor"></a><code><span><span class="keyword">val</span> do_children_and_then : <span><span class="type-var">'a</span> <span class="arrow">&#45;&gt;</span></span> <span><span>(<span><span class="type-var">'b</span> <span class="arrow">&#45;&gt;</span></span> <span class="type-var">'b</span>)</span> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'b</span> <a href="../index.html#type-folding_action">folding_action</a></span></span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-proceed_and_then"><a href="#val-proceed_and_then" class="anchor"></a><code><span><span class="keyword">val</span> proceed_and_then : <span><span class="type-var">'a</span> <span class="arrow">&#45;&gt;</span></span> <span><span>(<span><span class="type-var">'a</span> <span class="arrow">&#45;&gt;</span></span> <span class="type-var">'a</span>)</span> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'a</span> <a href="../index.html#type-folding_action">folding_action</a></span></span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-default"><a href="#val-default" class="anchor"></a><code><span><span class="keyword">val</span> default : <span><span class="type-var">'a</span> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'b</span> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'b</span> <a href="../index.html#type-folding_action">folding_action</a></span></span></code></div></div><p>Action handling</p><div class="odoc-spec"><div class="spec value anchored" id="val-handle"><a href="#val-handle" class="anchor"></a><code><span><span class="keyword">val</span> handle : 
  <span><span>(<span><span class="type-var">'a</span> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'b</span> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'b</span> <a href="#type-action">action</a></span>)</span> <span class="arrow">&#45;&gt;</span></span>
  <span><span class="label">continue</span>:<span>(<span><span class="type-var">'a</span> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'b</span> <span class="arrow">&#45;&gt;</span></span> <span class="type-var">'b</span>)</span> <span class="arrow">&#45;&gt;</span></span>
  <span><span class="type-var">'a</span> <span class="arrow">&#45;&gt;</span></span>
  <span><span class="type-var">'b</span> <span class="arrow">&#45;&gt;</span></span>
  <span class="type-var">'b</span></span></code></div><div class="spec-doc"><p><code>handle fold continue node acc</code> first calls <code>fold node acc</code>, and then behaves according to the action returned.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-leaf"><a href="#val-leaf" class="anchor"></a><code><span><span class="keyword">val</span> leaf : <span><span>(<span><span class="type-var">'x</span> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'a</span> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'a</span> <a href="#type-action">action</a></span>)</span> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'x0</span> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'a0</span> <span class="arrow">&#45;&gt;</span></span> <span class="type-var">'a0</span></span></code></div><div class="spec-doc"><p><code>leaf fold node acc</code> calls <code>fold node acc</code> and returns immediately (after executing the post action, if <code>fold</code> returns <a href="../index.html#type-folding_action.DoChildrenAndThen"><code>DoChildrenAndThen</code></a>).</p></div></div><div class="odoc-spec"><div class="spec class anchored" id="class-folder"><a href="#class-folder" class="anchor"></a><code><span><span class="keyword">class</span> 'a </span><span><a href="class-folder/index.html">folder</a></span><span> : <span class="keyword">object</span> ... <span class="keyword">end</span></span></code></div><div class="spec-doc"><p>Base folding visitor.</p></div></div><p>Entry points for folding over some basic types.</p><div class="odoc-spec"><div class="spec value anchored" id="val-fold_bool"><a href="#val-fold_bool" class="anchor"></a><code><span><span class="keyword">val</span> fold_bool : <span><span><span class="type-var">'a</span> <a href="class-folder/index.html">folder</a></span> <span class="arrow">&#45;&gt;</span></span> <span>bool <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'b</span> <span class="arrow">&#45;&gt;</span></span> <span class="type-var">'b</span></span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-fold_char"><a href="#val-fold_char" class="anchor"></a><code><span><span class="keyword">val</span> fold_char : <span><span><span class="type-var">'a</span> <a href="class-folder/index.html">folder</a></span> <span class="arrow">&#45;&gt;</span></span> <span>char <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'b</span> <span class="arrow">&#45;&gt;</span></span> <span class="type-var">'b</span></span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-fold_int"><a href="#val-fold_int" class="anchor"></a><code><span><span class="keyword">val</span> fold_int : <span><span><span class="type-var">'a</span> <a href="class-folder/index.html">folder</a></span> <span class="arrow">&#45;&gt;</span></span> <span>int <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'b</span> <span class="arrow">&#45;&gt;</span></span> <span class="type-var">'b</span></span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-fold_string"><a href="#val-fold_string" class="anchor"></a><code><span><span class="keyword">val</span> fold_string : <span><span><span class="type-var">'a</span> <a href="class-folder/index.html">folder</a></span> <span class="arrow">&#45;&gt;</span></span> <span>string <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'b</span> <span class="arrow">&#45;&gt;</span></span> <span class="type-var">'b</span></span></code></div></div><p>Generic entry points.</p><div class="odoc-spec"><div class="spec value anchored" id="val-fold_option"><a href="#val-fold_option" class="anchor"></a><code><span><span class="keyword">val</span> fold_option : 
  <span><span class="label">fold</span>:<span>(<span><span><span class="type-var">'b</span> <a href="class-folder/index.html">folder</a></span> <span class="keyword">as</span> 'a <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'c</span> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'d</span> <span class="arrow">&#45;&gt;</span></span> <span class="type-var">'d</span>)</span> <span class="arrow">&#45;&gt;</span></span>
  <span><span class="type-var">'e</span> <span class="arrow">&#45;&gt;</span></span>
  <span><span><span class="type-var">'f</span> option</span> <span class="arrow">&#45;&gt;</span></span>
  <span><span class="type-var">'d</span> <span class="arrow">&#45;&gt;</span></span>
  <span class="type-var">'d</span></span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-fold_list"><a href="#val-fold_list" class="anchor"></a><code><span><span class="keyword">val</span> fold_list : 
  <span><span class="label">fold</span>:<span>(<span><span><span class="type-var">'b</span> <a href="class-folder/index.html">folder</a></span> <span class="keyword">as</span> 'a <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'c</span> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'d</span> <span class="arrow">&#45;&gt;</span></span> <span class="type-var">'e</span>)</span> <span class="arrow">&#45;&gt;</span></span>
  <span><span class="type-var">'f</span> <span class="arrow">&#45;&gt;</span></span>
  <span><span><span class="type-var">'g</span> list</span> <span class="arrow">&#45;&gt;</span></span>
  <span><span class="type-var">'h</span> <span class="arrow">&#45;&gt;</span></span>
  <span class="type-var">'h</span></span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-fold_nel"><a href="#val-fold_nel" class="anchor"></a><code><span><span class="keyword">val</span> fold_nel : 
  <span><span class="label">fold</span>:<span>(<span><span><span class="type-var">'b</span> <a href="class-folder/index.html">folder</a></span> <span class="keyword">as</span> 'a <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'c</span> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'d</span> <span class="arrow">&#45;&gt;</span></span> <span class="type-var">'e</span>)</span> <span class="arrow">&#45;&gt;</span></span>
  <span><span class="type-var">'f</span> <span class="arrow">&#45;&gt;</span></span>
  <span><span><span class="type-var">'g</span> <a href="../../Basics/NEL/index.html#type-t">Basics.NEL.t</a></span> <span class="arrow">&#45;&gt;</span></span>
  <span><span class="type-var">'h</span> <span class="arrow">&#45;&gt;</span></span>
  <span class="type-var">'h</span></span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-fold'"><a href="#val-fold'" class="anchor"></a><code><span><span class="keyword">val</span> fold' : 
  <span><span class="label">fold</span>:<span>(<span><span><span class="type-var">'b</span> <a href="class-folder/index.html">folder</a></span> <span class="keyword">as</span> 'a <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'c</span> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'d</span> <span class="arrow">&#45;&gt;</span></span> <span class="type-var">'d</span>)</span> <span class="arrow">&#45;&gt;</span></span>
  <span><span class="type-var">'e</span> <span class="arrow">&#45;&gt;</span></span>
  <span><span><span class="type-var">'f</span> <a href="../../Srcloc/TYPES/index.html#type-with_loc">Srcloc.TYPES.with_loc</a></span> <span class="arrow">&#45;&gt;</span></span>
  <span><span class="type-var">'d</span> <span class="arrow">&#45;&gt;</span></span>
  <span class="type-var">'d</span></span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-fold_int'"><a href="#val-fold_int'" class="anchor"></a><code><span><span class="keyword">val</span> fold_int' : <span><span><span class="type-var">'a</span> <a href="class-folder/index.html">folder</a></span> <span class="arrow">&#45;&gt;</span></span> <span><span>int <a href="../../Srcloc/TYPES/index.html#type-with_loc">Srcloc.TYPES.with_loc</a></span> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'b</span> <span class="arrow">&#45;&gt;</span></span> <span class="type-var">'b</span></span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-fold_int'_opt"><a href="#val-fold_int'_opt" class="anchor"></a><code><span><span class="keyword">val</span> fold_int'_opt : <span><span><span class="type-var">'a</span> <a href="class-folder/index.html">folder</a></span> <span class="arrow">&#45;&gt;</span></span> <span><span><span>int <a href="../../Srcloc/TYPES/index.html#type-with_loc">Srcloc.TYPES.with_loc</a></span> option</span> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'b</span> <span class="arrow">&#45;&gt;</span></span> <span class="type-var">'b</span></span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-fold_string'"><a href="#val-fold_string'" class="anchor"></a><code><span><span class="keyword">val</span> fold_string' : <span><span><span class="type-var">'a</span> <a href="class-folder/index.html">folder</a></span> <span class="arrow">&#45;&gt;</span></span> <span><span>string <a href="../../Srcloc/TYPES/index.html#type-with_loc">Srcloc.TYPES.with_loc</a></span> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'b</span> <span class="arrow">&#45;&gt;</span></span> <span class="type-var">'b</span></span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-fold_string'_opt"><a href="#val-fold_string'_opt" class="anchor"></a><code><span><span class="keyword">val</span> fold_string'_opt : 
  <span><span><span class="type-var">'a</span> <a href="class-folder/index.html">folder</a></span> <span class="arrow">&#45;&gt;</span></span>
  <span><span><span>string <a href="../../Srcloc/TYPES/index.html#type-with_loc">Srcloc.TYPES.with_loc</a></span> option</span> <span class="arrow">&#45;&gt;</span></span>
  <span><span class="type-var">'b</span> <span class="arrow">&#45;&gt;</span></span>
  <span class="type-var">'b</span></span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-fold_with_loc_list"><a href="#val-fold_with_loc_list" class="anchor"></a><code><span><span class="keyword">val</span> fold_with_loc_list : 
  <span><span class="label">fold</span>:<span>(<span><span><span class="type-var">'a</span> <a href="class-folder/index.html">folder</a></span> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'b</span> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'a</span> <span class="arrow">&#45;&gt;</span></span> <span class="type-var">'a</span>)</span> <span class="arrow">&#45;&gt;</span></span>
  <span><span><span class="type-var">'c</span> <a href="class-folder/index.html">folder</a></span> <span class="arrow">&#45;&gt;</span></span>
  <span><span><span><span class="type-var">'b</span> <a href="../../Srcloc/TYPES/index.html#type-with_loc">Srcloc.TYPES.with_loc</a></span> list</span> <span class="arrow">&#45;&gt;</span></span>
  <span><span class="type-var">'d</span> <span class="arrow">&#45;&gt;</span></span>
  <span class="type-var">'d</span></span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-handle'"><a href="#val-handle'" class="anchor"></a><code><span><span class="keyword">val</span> handle' : 
  <span><span>(<span><span><span class="type-var">'a</span> <a href="../../Srcloc/TYPES/index.html#type-with_loc">Srcloc.TYPES.with_loc</a></span> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'x</span> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'x</span> <a href="#type-action">action</a></span>)</span> <span class="arrow">&#45;&gt;</span></span>
  <span><span class="label">fold</span>:<span>(<span><span><span class="type-var">'x0</span> <a href="class-folder/index.html">folder</a></span> <span class="keyword">as</span> 'b <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'a0</span> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'x1</span> <span class="arrow">&#45;&gt;</span></span> <span class="type-var">'x1</span>)</span> <span class="arrow">&#45;&gt;</span></span>
  <span><span class="type-var">'d</span> <span class="arrow">&#45;&gt;</span></span>
  <span><span><span class="type-var">'a1</span> <a href="../../Srcloc/TYPES/index.html#type-with_loc">Srcloc.TYPES.with_loc</a></span> <span class="arrow">&#45;&gt;</span></span>
  <span><span class="type-var">'x2</span> <span class="arrow">&#45;&gt;</span></span>
  <span class="type-var">'x2</span></span></code></div><div class="spec-doc"><p>Helper to shorten definitions for traversal of nodes with source locations</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-leaf'"><a href="#val-leaf'" class="anchor"></a><code><span><span class="keyword">val</span> leaf' : 
  <span><span>(<span><span><span class="type-var">'a</span> <a href="../../Srcloc/TYPES/index.html#type-with_loc">Srcloc.TYPES.with_loc</a></span> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'b</span> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'b</span> <a href="#type-action">action</a></span>)</span> <span class="arrow">&#45;&gt;</span></span>
  <span><span><span class="type-var">'b</span> <a href="class-folder/index.html">folder</a></span> <span class="arrow">&#45;&gt;</span></span>
  <span><span><span class="type-var">'a</span> <a href="../../Srcloc/TYPES/index.html#type-with_loc">Srcloc.TYPES.with_loc</a></span> <span class="arrow">&#45;&gt;</span></span>
  <span><span class="type-var">'b</span> <span class="arrow">&#45;&gt;</span></span>
  <span class="type-var">'b</span></span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-todo"><a href="#val-todo" class="anchor"></a><code><span><span class="keyword">val</span> todo : <span><span>(string * int * int * int)</span> <span class="arrow">&#45;&gt;</span></span> <span>string <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'b</span> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'a</span> <span class="arrow">&#45;&gt;</span></span> <span class="type-var">'a</span></span></code></div><div class="spec-doc"><p>Reports a missing folding visitor implementation <em>once</em>. Use __POS__ as first argument</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-partial"><a href="#val-partial" class="anchor"></a><code><span><span class="keyword">val</span> partial : <span><span>(string * int * int * int)</span> <span class="arrow">&#45;&gt;</span></span> <span>string <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'a</span> <span class="arrow">&#45;&gt;</span></span> <span class="type-var">'b</span></span></code></div><div class="spec-doc"><p>Reports a partial folding visitor implementation <em>once</em>. Use __POS__ as first argument</p></div></div></div></body></html>
