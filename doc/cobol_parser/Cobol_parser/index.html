<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>Cobol_parser (cobol_parser.Cobol_parser)</title><meta charset="utf-8"/><link rel="stylesheet" href="../../odoc.support/odoc.css"/><meta name="generator" content="odoc 2.4.2"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><script src="../../odoc.support/highlight.pack.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body class="odoc"><nav class="odoc-nav"><a href="../index.html">Up</a> â€“ <a href="../index.html">cobol_parser</a> &#x00BB; Cobol_parser</nav><header class="odoc-preamble"><h1>Module <code><span>Cobol_parser</span></code></h1></header><nav class="odoc-toc"><ul><li><a href="#exported-modules">Exported modules</a></li><li><a href="#exported-functions">Exported functions</a><ul><li><a href="#basic-(one-shot)-parsing">Basic (one-shot) parsing</a></li><li><a href="#rewindable-parsing">Rewindable parsing</a></li><li><a href="#accessing-artifacts">Accessing artifacts</a></li></ul></li><li><a href="#modules-and-functions-exported-for-testing-purposes">Modules and functions exported for testing purposes</a></li></ul></nav><div class="odoc-content"><h2 id="exported-modules"><a href="#exported-modules" class="anchor"></a>Exported modules</h2><div class="odoc-spec"><div class="spec module anchored" id="module-Options"><a href="#module-Options" class="anchor"></a><code><span><span class="keyword">module</span> <a href="Options/index.html">Options</a></span><span> : <span class="keyword">sig</span> ... <span class="keyword">end</span></span></code></div><div class="spec-doc"><p>Options to tune the parser engine</p></div></div><div class="odoc-spec"><div class="spec module anchored" id="module-Outputs"><a href="#module-Outputs" class="anchor"></a><code><span><span class="keyword">module</span> <a href="Outputs/index.html">Outputs</a></span><span> : <span class="keyword">sig</span> ... <span class="keyword">end</span></span></code></div><div class="spec-doc"><p>Output types for the engine</p></div></div><div class="odoc-spec"><div class="spec module anchored" id="module-Diagnostics"><a href="#module-Diagnostics" class="anchor"></a><code><span><span class="keyword">module</span> <a href="Diagnostics/index.html">Diagnostics</a></span><span> : <span class="keyword">sig</span> ... <span class="keyword">end</span></span></code></div></div><div class="odoc-spec"><div class="spec module anchored" id="module-Tokens"><a href="#module-Tokens" class="anchor"></a><code><span><span class="keyword">module</span> <a href="Tokens/index.html">Tokens</a></span><span> : <span class="keyword">sig</span> ... <span class="keyword">end</span></span></code></div></div><div class="odoc-spec"><div class="spec module anchored" id="module-Keywords"><a href="#module-Keywords" class="anchor"></a><code><span><span class="keyword">module</span> <a href="Keywords/index.html">Keywords</a></span><span> : <span class="keyword">sig</span> ... <span class="keyword">end</span></span></code></div></div><h2 id="exported-functions"><a href="#exported-functions" class="anchor"></a>Exported functions</h2><h3 id="basic-(one-shot)-parsing"><a href="#basic-(one-shot)-parsing" class="anchor"></a>Basic (one-shot) parsing</h3><div class="odoc-spec"><div class="spec type anchored" id="type-simple_parsing"><a href="#type-simple_parsing" class="anchor"></a><code><span><span class="keyword">type</span> <span>'m simple_parsing</span></span><span> =
  <span><span class="label">options</span>:<span class="xref-unresolved">Cobol_parser__.Parser_options.parser_options</span> <span class="arrow">&#45;&gt;</span></span>
  <span><a href="../../cobol_preproc/Cobol_preproc/index.html#type-preprocessor">Cobol_preproc.preprocessor</a> <span class="arrow">&#45;&gt;</span></span>
  <span><span><span>(<span><a href="../../cobol_ptree/Cobol_ptree/index.html#type-compilation_group">Cobol_ptree.compilation_group</a> option</span>, <span class="type-var">'m</span>)</span>
    <span class="xref-unresolved">Cobol_parser__.Parser_outputs.output</span></span>
    <span class="xref-unresolved">Cobol_common__Diagnostics_accumulator.MAKE(Cobol_parser__.Parser_diagnostics.ALL).TYPES.with_diags</span></span></span></code></div><div class="spec-doc"><p>Simple parsing functions traverse the inputs once to produce a result.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-parse_simple"><a href="#val-parse_simple" class="anchor"></a><code><span><span class="keyword">val</span> parse_simple : <span><a href="../../cobol_common/Cobol_common/Behaviors/index.html#type-amnesic">Cobol_common.Behaviors.amnesic</a> <a href="#type-simple_parsing">simple_parsing</a></span></span></code></div><div class="spec-doc"><p>Simple parsing function that does not return any artifact.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-parse_with_artifacts"><a href="#val-parse_with_artifacts" class="anchor"></a><code><span><span class="keyword">val</span> parse_with_artifacts : <span><a href="../../cobol_common/Cobol_common/Behaviors/index.html#type-eidetic">Cobol_common.Behaviors.eidetic</a> <a href="#type-simple_parsing">simple_parsing</a></span></span></code></div><div class="spec-doc"><p>Simple parsing function does return some artifacts.</p></div></div><h3 id="rewindable-parsing"><a href="#rewindable-parsing" class="anchor"></a>Rewindable parsing</h3><div class="odoc-spec"><div class="spec type anchored" id="type-rewindable_parsing"><a href="#type-rewindable_parsing" class="anchor"></a><code><span><span class="keyword">type</span> <span>'m rewindable_parsing</span></span><span> =
  <span><span class="label">options</span>:<span class="xref-unresolved">Cobol_parser__.Parser_options.parser_options</span> <span class="arrow">&#45;&gt;</span></span>
  <span><a href="../../cobol_preproc/Cobol_preproc/index.html#type-preprocessor">Cobol_preproc.preprocessor</a> <span class="arrow">&#45;&gt;</span></span>
  <span><span>(<span><span>(<span><a href="../../cobol_ptree/Cobol_ptree/index.html#type-compilation_group">Cobol_ptree.compilation_group</a> option</span>, <span class="type-var">'m</span>)</span>
     <span class="xref-unresolved">Cobol_parser__.Parser_outputs.output</span></span> <span class="keyword">as</span> 'x
   * <span><span class="type-var">'x</span> <a href="#type-rewinder">rewinder</a></span>)</span>
    <span class="xref-unresolved">Cobol_common__Diagnostics_accumulator.MAKE(Cobol_parser__.Parser_diagnostics.ALL).TYPES.with_diags</span></span></span></code></div><div class="spec-doc"><p>Rewindable parsing functions extend the behaviors of simple parsing functions, with the ability to <i>rewind</i> the parser (and pre-processor) before a given lexing position. To this end, their results include a <a href="#type-rewinder"><code>rewinder</code></a> that may then be given to <a href="#val-rewind_and_parse"><code>rewind_and_parse</code></a>.</p></div></div><div class="odoc-spec"><div class="spec type anchored" id="type-rewinder"><a href="#type-rewinder" class="anchor"></a><code><span><span class="keyword">and</span> <span>'x rewinder</span></span></code></div><div class="spec-doc"><p>Rewinder for parsing functions that produce results of type <code>'x</code></p></div></div><div class="odoc-spec"><div class="spec type anchored" id="type-preprocessor_rewind"><a href="#type-preprocessor_rewind" class="anchor"></a><code><span><span class="keyword">and</span> preprocessor_rewind</span><span> =
  <span><span class="optlabel">?new_position</span>:<span class="xref-unresolved">Stdlib</span>.Lexing.position <span class="arrow">&#45;&gt;</span></span>
  <span><a href="../../cobol_preproc/Cobol_preproc/index.html#type-preprocessor">Cobol_preproc.preprocessor</a> <span class="keyword">as</span> 'r <span class="arrow">&#45;&gt;</span></span>
  <span class="type-var">'r</span></span></code></div><div class="spec-doc"><p>Functions for rewinding the pre-processor. Such a function should return a preprocessor in the <em>exact same state</em> as the one given in argument, with the only exception that the input text is now read from <code>new_position</code>. If <code>new_position</code> is not given, the text should be read from the very begining of the input.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-rewindable_parse_simple"><a href="#val-rewindable_parse_simple" class="anchor"></a><code><span><span class="keyword">val</span> rewindable_parse_simple : <span><a href="../../cobol_common/Cobol_common/Behaviors/index.html#type-amnesic">Cobol_common.Behaviors.amnesic</a> <a href="#type-rewindable_parsing">rewindable_parsing</a></span></span></code></div><div class="spec-doc"><p>Rewindable parsing function that does not return any artifact.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-rewindable_parse_with_artifacts"><a href="#val-rewindable_parse_with_artifacts" class="anchor"></a><code><span><span class="keyword">val</span> rewindable_parse_with_artifacts : 
  <span><a href="../../cobol_common/Cobol_common/Behaviors/index.html#type-eidetic">Cobol_common.Behaviors.eidetic</a> <a href="#type-rewindable_parsing">rewindable_parsing</a></span></span></code></div><div class="spec-doc"><p>Rewindable parsing function that does return some artifacts.</p></div></div><div class="odoc-spec"><div class="spec type anchored" id="type-position"><a href="#type-position" class="anchor"></a><code><span><span class="keyword">type</span> position</span><span> = </span></code><ol><li id="type-position.Lexing" class="def variant constructor anchored"><a href="#type-position.Lexing" class="anchor"></a><code><span>| </span><span><span class="constructor">Lexing</span> <span class="keyword">of</span> <span class="xref-unresolved">Stdlib</span>.Lexing.position</span></code><div class="def-doc"><span class="comment-delim">(*</span><p>raw lexing position</p><span class="comment-delim">*)</span></div></li><li id="type-position.Indexed" class="def variant constructor anchored"><a href="#type-position.Indexed" class="anchor"></a><code><span>| </span><span><span class="constructor">Indexed</span> <span class="keyword">of</span> </span><span>{</span></code><ol><li id="type-position.line" class="def record field anchored"><a href="#type-position.line" class="anchor"></a><code><span>line : int;</span></code><div class="def-doc"><span class="comment-delim">(*</span><p>line number (starting from 0)</p><span class="comment-delim">*)</span></div></li><li id="type-position.char" class="def record field anchored"><a href="#type-position.char" class="anchor"></a><code><span>char : int;</span></code><div class="def-doc"><span class="comment-delim">(*</span><p>character number in line (starting from 0)</p><span class="comment-delim">*)</span></div></li></ol><code><span>}</span></code></li></ol></div><div class="spec-doc"><p>Specification of positions to rewind to.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-rewind_and_parse"><a href="#val-rewind_and_parse" class="anchor"></a><code><span><span class="keyword">val</span> rewind_and_parse : 
  <span><span><span class="type-var">'x</span> <a href="#type-rewinder">rewinder</a></span> <span class="arrow">&#45;&gt;</span></span>
  <span><a href="#type-preprocessor_rewind">preprocessor_rewind</a> <span class="arrow">&#45;&gt;</span></span>
  <span><span class="label">position</span>:<a href="#type-position">position</a> <span class="arrow">&#45;&gt;</span></span>
  <span><span>(<span><span>(<span><a href="../../cobol_ptree/Cobol_ptree/index.html#type-compilation_group">Cobol_ptree.compilation_group</a> option</span>, <span class="type-var">'m</span>)</span>
     <span class="xref-unresolved">Cobol_parser__.Parser_outputs.output</span></span> <span class="keyword">as</span> 'x
   * <span><span class="type-var">'x</span> <a href="#type-rewinder">rewinder</a></span>)</span>
    <span class="xref-unresolved">Cobol_common__Diagnostics_accumulator.MAKE(Cobol_parser__.Parser_diagnostics.ALL).TYPES.with_diags</span></span></span></code></div><div class="spec-doc"><p><code>rewind_and_parse rewinder preprocessor_rewind ~position</code> uses <code>rewinder</code> to restart parsing before the given <code>position</code>. Note that the <code>new_position</code> argument that is given to <code>preprocessor_rewind</code> may <em>not</em> correspond to <code>position</code>, as the parser typically needs to rewind earlier than <code>position</code>.</p></div></div><h3 id="accessing-artifacts"><a href="#accessing-artifacts" class="anchor"></a>Accessing artifacts</h3><div class="odoc-spec"><div class="spec value anchored" id="val-artifacts"><a href="#val-artifacts" class="anchor"></a><code><span><span class="keyword">val</span> artifacts : 
  <span><span><span>(<span class="type-var">_</span>, <a href="../../cobol_common/Cobol_common/Behaviors/index.html#type-eidetic">Cobol_common.Behaviors.eidetic</a>)</span> <span class="xref-unresolved">Cobol_parser__.Parser_outputs.output</span></span> <span class="arrow">&#45;&gt;</span></span>
  <span class="xref-unresolved">Cobol_parser__.Parser_outputs.artifacts</span></span></code></div></div><h2 id="modules-and-functions-exported-for-testing-purposes"><a href="#modules-and-functions-exported-for-testing-purposes" class="anchor"></a>Modules and functions exported for testing purposes</h2><p>Signatures of modules below may change unexpectedly.</p><div class="odoc-spec"><div class="spec module anchored" id="module-INTERNAL"><a href="#module-INTERNAL" class="anchor"></a><code><span><span class="keyword">module</span> <a href="INTERNAL/index.html">INTERNAL</a></span><span> : <span class="keyword">sig</span> ... <span class="keyword">end</span></span></code></div></div></div></body></html>
